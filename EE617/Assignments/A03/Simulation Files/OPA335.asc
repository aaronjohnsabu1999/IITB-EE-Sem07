Version 4
SHEET 1 1344 1208
WIRE -32 80 -160 80
WIRE 80 80 -32 80
WIRE 208 80 144 80
WIRE 320 96 272 96
WIRE -160 112 -160 80
WIRE -32 112 -32 80
WIRE 208 112 192 112
WIRE 464 112 384 112
WIRE 656 112 464 112
WIRE -96 128 -112 128
WIRE 32 128 16 128
WIRE 320 128 304 128
WIRE -96 144 -96 128
WIRE 32 144 32 128
WIRE 192 144 192 112
WIRE 464 144 464 112
WIRE 656 144 656 112
WIRE 528 160 512 160
WIRE 736 160 704 160
WIRE -96 176 -112 176
WIRE 32 176 16 176
WIRE 528 176 528 160
WIRE 736 176 736 160
WIRE -96 192 -96 176
WIRE 32 192 32 176
WIRE -160 208 -160 192
WIRE -160 208 -176 208
WIRE -32 208 -32 192
WIRE 528 208 512 208
WIRE 736 208 704 208
WIRE 432 240 384 240
WIRE 464 240 464 224
WIRE 464 240 432 240
WIRE 656 240 656 224
WIRE 656 240 640 240
WIRE 304 256 304 128
WIRE 320 256 304 256
WIRE 416 272 384 272
WIRE 416 320 416 272
WIRE 464 320 464 304
WIRE -32 416 -160 416
WIRE 80 416 -32 416
WIRE 208 416 144 416
WIRE 320 432 272 432
WIRE -160 448 -160 416
WIRE -32 448 -32 416
WIRE 208 448 192 448
WIRE 464 448 384 448
WIRE 656 448 464 448
WIRE -96 464 -112 464
WIRE 32 464 16 464
WIRE 320 464 304 464
WIRE -96 480 -96 464
WIRE 32 480 32 464
WIRE 192 480 192 448
WIRE 464 480 464 448
WIRE 656 480 656 448
WIRE 528 496 512 496
WIRE 736 496 704 496
WIRE -96 512 -112 512
WIRE 32 512 16 512
WIRE 528 512 528 496
WIRE 736 512 736 496
WIRE -96 528 -96 512
WIRE 32 528 32 512
WIRE -160 544 -160 528
WIRE -160 544 -176 544
WIRE -32 544 -32 528
WIRE 528 544 512 544
WIRE 736 544 704 544
WIRE 432 576 384 576
WIRE 464 576 464 560
WIRE 464 576 432 576
WIRE 656 576 656 560
WIRE 656 576 640 576
WIRE 304 592 304 464
WIRE 320 592 304 592
WIRE 416 608 384 608
WIRE 416 656 416 608
WIRE 464 656 464 640
WIRE 256 704 240 704
WIRE -192 752 -208 752
WIRE 96 752 80 752
WIRE 144 752 96 752
WIRE 240 752 240 704
WIRE 240 752 208 752
WIRE 272 752 240 752
WIRE -208 768 -208 752
WIRE 368 768 336 768
WIRE 464 768 448 768
WIRE 272 784 256 784
WIRE 256 816 256 784
WIRE -208 864 -208 832
WIRE -192 864 -208 864
WIRE 368 864 336 864
WIRE 464 864 464 768
WIRE 464 864 448 864
WIRE 496 864 464 864
WIRE 576 880 560 880
WIRE 624 880 576 880
WIRE -208 896 -208 864
WIRE 96 896 96 752
WIRE 496 896 464 896
WIRE 720 896 688 896
WIRE 624 912 608 912
WIRE 608 944 608 912
WIRE 368 960 336 960
WIRE 464 960 464 896
WIRE 464 960 448 960
WIRE 480 960 464 960
WIRE 576 960 576 880
WIRE 576 960 560 960
WIRE -208 1024 -208 976
WIRE 96 1024 96 976
WIRE 336 1024 336 960
FLAG 96 1024 0
FLAG 416 656 0
FLAG -208 1024 0
FLAG 256 816 0
FLAG 192 480 0
FLAG 192 144 0
FLAG 608 944 0
FLAG 720 896 OUT
IOPIN 720 896 Out
FLAG 80 752 IN
IOPIN 80 752 In
FLAG -192 864 OSC
IOPIN -192 864 Out
FLAG -192 752 NOSC
IOPIN -192 752 Out
FLAG 640 576 ADDER
IOPIN 640 576 Out
FLAG 336 1024 0
FLAG 336 864 ADDER
IOPIN 336 864 In
FLAG 432 576 C1
FLAG 32 528 NOSC
IOPIN 32 528 In
FLAG -32 544 0
FLAG -176 544 IN
IOPIN -176 544 In
FLAG -96 528 OSC
IOPIN -96 528 In
FLAG 32 480 0
FLAG -96 480 0
FLAG 736 544 OSC
IOPIN 736 544 In
FLAG 528 544 NOSC
IOPIN 528 544 In
FLAG 736 512 0
FLAG 528 512 0
FLAG 32 192 OSC
IOPIN 32 192 In
FLAG -32 208 0
FLAG -176 208 IN
IOPIN -176 208 In
FLAG -96 192 NOSC
IOPIN -96 192 In
FLAG 32 144 0
FLAG -96 144 0
FLAG 464 656 0
FLAG 416 320 0
FLAG 640 240 ADDER
IOPIN 640 240 Out
FLAG 432 240 C1
FLAG 736 208 NOSC
IOPIN 736 208 In
FLAG 528 208 OSC
IOPIN 528 208 In
FLAG 736 176 0
FLAG 528 176 0
FLAG 464 320 0
FLAG 256 704 OFFSET
SYMBOL voltage 96 880 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 22 95 Left 2
SYMATTR InstName V_IN
SYMATTR Value SINE(0 1m 10)
SYMBOL Opamps\\opamp 240 160 M180
SYMATTR InstName U1
SYMATTR SpiceLine Aol={A_IN}
SYMBOL Opamps\\opamp 352 320 R180
SYMATTR InstName U3
SYMATTR SpiceLine Aol={A_Z}
SYMATTR SpiceLine2 GBW=100Meg
SYMBOL Opamps\\opamp 352 656 R180
SYMATTR InstName U6
SYMATTR SpiceLine Aol={A_Z}
SYMATTR SpiceLine2 GBW=100Meg
SYMBOL Opamps\\opamp 352 176 M180
WINDOW 0 1 96 Left 2
SYMATTR InstName U2
SYMATTR SpiceLine Aol={G_B}
SYMATTR SpiceLine2 GBW=500Meg
SYMBOL Opamps\\opamp 240 496 M180
SYMATTR InstName U4
SYMATTR SpiceLine Aol={A_IN}
SYMBOL Opamps\\opamp 352 512 M180
WINDOW 0 -1 98 Left 2
SYMATTR InstName U5
SYMATTR SpiceLine Aol={G_B}
SYMATTR SpiceLine2 GBW=500Meg
SYMBOL Opamps\\opamp 304 832 M180
SYMATTR InstName U7
SYMATTR SpiceLine Aol={A_M}
SYMATTR SpiceLine2 GBW=500Meg
SYMBOL Opamps\\opamp 656 960 M180
SYMATTR InstName U8
SYMATTR SpiceLine Aol={G_O}
SYMBOL Misc\\cell 144 80 R90
WINDOW 0 -32 32 VBottom 2
WINDOW 3 32 32 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 83 34 VBottom 2
SYMATTR InstName V2
SYMATTR Value {V_OSN}
SYMATTR SpiceLine Rser=0
SYMBOL Misc\\cell 144 416 R90
WINDOW 0 -32 32 VBottom 2
WINDOW 3 32 32 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 60 32 VTop 2
SYMATTR InstName V3
SYMATTR Value {V_OSN}
SYMATTR SpiceLine Rser=0
SYMBOL Misc\\cell 208 752 R90
WINDOW 0 -32 32 VBottom 2
WINDOW 3 32 32 VTop 2
WINDOW 123 88 32 VTop 2
WINDOW 39 60 32 VTop 2
SYMATTR InstName V4
SYMATTR Value {V_OSM}
SYMATTR SpiceLine Rser=0
SYMBOL voltage -208 880 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
WINDOW 3 24 96 Left 1
SYMATTR SpiceLine Rser=0
SYMATTR Value PULSE(0 1 0 1n 1n 40u 80u)
SYMATTR InstName V_OSC
SYMBOL cap 448 576 R0
WINDOW 0 -15 51 Left 2
WINDOW 3 22 51 Left 2
SYMATTR InstName C1
SYMATTR Value {C}
SYMATTR SpiceLine Rser={RC}
SYMBOL Digital\\inv -272 832 R270
SYMATTR InstName A1
SYMATTR SpiceLine Vhigh=1V,Td=4e-9,Trise=4e-9
SYMBOL Opamps\\opamp 528 944 M180
WINDOW 0 -1 95 Left 2
SYMATTR InstName U9
SYMATTR SpiceLine Aol=1Meg
SYMBOL res 464 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL res 576 944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 464 944 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 464 848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL sw -32 432 M0
WINDOW 3 -72 8 Left 2
WINDOW 0 4 7 Left 2
SYMATTR Value IDSW
SYMATTR InstName S3
SYMBOL sw -160 432 M0
WINDOW 3 -71 10 Left 2
WINDOW 0 9 11 Left 2
SYMATTR Value IDSW
SYMATTR InstName S4
SYMBOL sw 656 464 M0
WINDOW 3 -70 6 Left 2
WINDOW 0 8 7 Left 2
SYMATTR Value IDSW
SYMATTR InstName S7
SYMBOL sw 464 464 M0
WINDOW 3 -71 10 Left 2
WINDOW 0 9 9 Left 2
SYMATTR Value IDSW
SYMATTR InstName S8
SYMBOL sw -32 96 M0
WINDOW 3 -72 8 Left 2
WINDOW 0 4 7 Left 2
SYMATTR Value IDSW
SYMATTR InstName S1
SYMBOL sw -160 96 M0
WINDOW 3 -71 10 Left 2
WINDOW 0 9 11 Left 2
SYMATTR Value IDSW
SYMATTR InstName S2
SYMBOL cap 448 240 R0
WINDOW 0 -15 51 Left 2
WINDOW 3 22 51 Left 2
SYMATTR InstName C2
SYMATTR Value {C}
SYMATTR SpiceLine Rser={RC}
SYMBOL sw 656 128 M0
WINDOW 3 -70 6 Left 2
WINDOW 0 8 7 Left 2
SYMATTR Value IDSW
SYMATTR InstName S9
SYMBOL sw 464 128 M0
WINDOW 3 -71 10 Left 2
WINDOW 0 9 9 Left 2
SYMATTR Value IDSW
SYMATTR InstName S10
TEXT -40 1088 Left 2 !.tran 0.2
TEXT -240 1184 Left 2 !.param A_IN={2} G_B={1000} A_Z={2} A_M={A_IN} G_O={1}
TEXT -240 1088 Left 2 !.inc opamp.sub
TEXT -240 1120 Left 2 !.param V_OSN={5m} V_OSM={5m} C={10u} RC={1}
TEXT -240 1152 Left 2 !.model IDSW SW(Ron=1m Roff=1000Meg Vt=0.5 Vh=1e-4)
